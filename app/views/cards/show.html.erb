<div class="row">
  <div class="col-md-4">
    <h1><%= @card.card_name %></h1>
  </div>
</div>

<% if @card.related_card_id > 0 %>
  <div class="col-md-6">
    <img src="https://api.mtgdb.info/content/card_images/<%= @card.multiverse_id %>.jpeg" />
    <img src="https://api.mtgdb.info/content/card_images/<%= @card.related_card_id %>.jpeg" />
<% else %>
  <div class="col-md-4">
    <img src="https://api.mtgdb.info/content/card_images/<%= @card.multiverse_id %>.jpeg" />
<% end %>
  </div>

<div class="col-md-4">
  <div class="well" id="card_sidebar">
    <p><strong>Card Name: </strong><%= @card.card_name %></p>
    <p><strong>Mana Cost: </strong><%= @card.mana_cost %></p>
    <p><strong>Converted Mana Cost: </strong><%= @card.converted_mana_cost %></p>
    <p>
      <strong>Types: </strong><%= @card.card_type %>
      <% if @card.card_subtype %>
         -- <%= @card.card_subtype %>
      <% end %>
    </p>
    <% if @card.card_type == "Creature" %>
      <p><strong>P/T: </strong><%= @card.power %>/<%= @card.toughness %></p>
    <% end %>
    <% if @card.card_type == "Planeswalker" %>
      <p><strong>Loyalty: </strong><%= @card.loyalty %></p>
    <% end %>
    <% if @card.description %>
      <p><strong>Card Text: </strong><%= @card.description %></p>
    <% end %>
    <% if @card.flavor %>
      <p><strong>Flavor Text: </strong><span class="flavor"><%= @card.flavor %></span></p>
    <% end %>
    <p><strong>Expansion: </strong><%= @card.card_set_name %> (<%= @card.released_at.to_time.strftime('%b %d %Y') %>)</p>
    <p><strong>Card Number: </strong><%= @card.set_number %></p>
    <p><strong>Rarity: </strong><%= @card.rarity %></p>
    <p><strong>Artist: </strong><%= @card.artist %></p>
  </div>
</div>

<% if @card.related_card_id > 0 %>
<div class="col-md-2">
<% else %>
<div class="col-md-4">
<% end %>
  <table class="table table-striped table-hover">
    <tr>
      <th><strong>Formats</strong></th>
      <th><strong>Legality</strong></th>
    </tr>
    <% @card.formats.each do |format| %>
      <tr>
        <td><%= format["name"] %></td>
        <td><%= format["legality"] %></td>
      </tr>
    <% end %>
  </table>
</div>

<% if @card.rulings.any? %>
  <div class="row" id="rulings">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Card Rulings:</th>
        </tr>
      </thead>
      <tbody>
      <% @card.rulings.each do |ruling| %>
        <tr>
          <td><%= ruling["releasedAt"].to_time.strftime('%b %d %Y') %></td>
          <td><%= ruling["rule"] %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
<% end %>